<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Running Simulation · SegregatedVMSSolver.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">SegregatedVMSSolver.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Running Simulation</a></li><li><a class="tocitem" href="../mpi/">MPI run</a></li><li><span class="tocitem">Cases</span><ul><li><a class="tocitem" href="../Cases/taylorgreen/">Taylor Green</a></li><li><a class="tocitem" href="../Cases/liddriven/">Lid Driven Cavity Flow</a></li><li><a class="tocitem" href="../Cases/cylinder/">Cylinder</a></li><li><a class="tocitem" href="../Cases/airfoil/">Airfoil</a></li></ul></li><li><a class="tocitem" href="../restart/">Restart</a></li><li><a class="tocitem" href="../post_proc/">Post Processing</a></li><li><a class="tocitem" href="../blinit/">Boundary Layer Initialization</a></li><li><a class="tocitem" href="../api_info/">API information</a></li><li><a class="tocitem" href="../references/">References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Running Simulation</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Running Simulation</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/carlodev/SegregatedVMSSolver.jl/blob/master/docs/src/run.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Package-usage"><a class="docs-heading-anchor" href="#Package-usage">Package usage</a><a id="Package-usage-1"></a><a class="docs-heading-anchor-permalink" href="#Package-usage" title="Permalink"></a></h1><p>The package allows the user to set a wide variety of options. Problem Settings:</p><ul><li><code>:N</code> = number of divisions for each dimension.</li><li><code>:D</code> = dimension. It can be 2 or 3.</li><li><code>:order</code> = order of the elements. At the moment just the order 1 is tested.</li><li><code>:case</code> it can be <code>&quot;TaylorGreen&quot;, &quot;LidDriven&quot;, &quot;Cylinder&quot;, &quot;Channel&quot;, &quot;Airfoil&quot;</code>.</li><li><code>:u_in</code> the inlet velocity for <code>&quot;Airfoil&quot;</code> and <code>&quot;Cylinder&quot;</code>, or the lid velocity for <code>&quot;LidDriven</code></li><li><code>:c</code> chord length in the <code>&quot;Airfoil&quot;</code> case, or dimension of lid for <code>&quot;LidDriven&quot;</code>. It is used to compute the viscosity <code>:ν</code> from the Reynolds and velocity</li><li><code>:Re</code> Reynolds number. </li><li><code>:ν</code> kinematic viscosity. It can be overwritten in order to satisfy the Reynolds, in this case a warning informs the user.</li><li><code>:ρ</code> density. It used just to compute the force. The advice is to keep it <code>1.0</code> and just set the Reynolds.</li></ul><p>Time settings</p><ul><li><code>:t0</code> starting time.</li><li><code>:dt</code> time step length.</li><li><code>:tF</code> end time.</li><li><code>:t_endramp</code> for high reynolds cases, like airfoils and lid driven, for improving numeric stability the inlet velocity (or the lid velocity) are increased from 0 up the desired value in the time between :t0 and :t<em>endramp. If :t0 = :t</em>endramp there is no ramping.</li></ul><p>Ode Settings</p><ul><li><span>$:θ$</span> parameter required for time integration.  <span>$:θ = 0.5$</span> allows to have 2nd order accuracy on velocity. For the pressure is alwys used a fully implicit method.</li></ul><p>Numeric Settings</p><ul><li><code>:method</code> can be <code>:SUPG</code> or <code>:VMS</code></li><li><code>:Cᵢ</code> is a vector containing stabilization coefficients used for the <code>:VMS</code>. The suggested values are <code>[4,36]</code>, <a href="../references/#Trofimova2009">[3]</a></li><li><code>:options</code> the settings for the petsc solver. The function <a href="../api_info/#SegregatedVMSSolver.petsc_options"><code>petsc_options</code></a> can be used.</li></ul><p>Print Settings</p><ul><li><code>:printmodel</code> can be <code>true</code> or <code>false</code>. If <code>true</code> mesh is saved as a .pvtu file.</li><li><code>:printinitial</code> can be <code>true</code> or <code>false</code>. If <code>true</code> saves the flowfield at <code>t0</code>. It is useful when restarting from a previous solution.</li><li><code>:benchmark</code>  can be <code>true</code> or <code>false</code>. If <code>true</code> it does not print the solution, and it gives the time needed for computing the iteration form the 2nd till the end. The first iteration is not taken into account for computing the time because of precompilation.</li><li><code>:name_tags</code> specify the boundary names to export, eg: <code>:name_tags=&gt;[&quot;airfoil&quot;,&quot;inlet&quot;]</code></li><li><code>:fieldexport</code> specify which field to export for each boundary specified in <code>name_tags</code>. eg: <code>[(&quot;ph&quot;,&quot;friction&quot;)]</code> The supported field are<ul><li><code>ph</code> pressure</li><li><code>friction</code> for friction (not taking into account the viscosity)</li><li><code>uh</code> for velocity (x,y,z components)</li></ul></li></ul><p>Mesh Settings</p><ul><li><code>:mesh_file</code> is a string with the name of the <code>.msh</code> that can be read.</li></ul><p>Partitioning Settings</p><ul><li><code>:rank_partition</code> tuple which set the number of division on each axes to split the geometry to the processors.  For non cartesian problems it does not matter how the cores are split into the dimensions as long as <code>prod(rank_partition)</code> is equal to the <code>MPI</code> ranks.</li><li><code>backend</code> can be <code>with_debug()</code> (can be run in the <code>REPL</code>) or <code>with_mpi()</code>. </li></ul><p>Restart Settings</p><ul><li><code>:restart</code> can be <code>true</code> or <code>false</code>. If <code>false</code> the initial conditions are computed internally using <code>:u_in</code> or analytical solution (<code>&quot;TaylorGreen&quot;</code>). </li><li><code>:restart_file</code> is used only if <code>:restart</code>is true. It is a <code>.csv</code> file created from ParaView using the SpreadSheet. It has the list of fo velocity and pressure in each node. It is better to run <code>clean grid</code> in Paraview before for get rid of duplicate points.</li></ul><p>Monitor Settings</p><ul><li><code>:log_dir</code> select the folder path where the simulation while running check if there is the file <code>PrintSim.txt</code>. If the file exists the simulation will start creating <code>.pvtu</code> files at the end of every time step. The contenent of the file does not matter. By default the directory is <code>/Log</code></li></ul><pre><code class="language-Example hljs">using SegregatedVMSSolver
using Parameters,PartitionedArrays

  
   params = Dict(
         :N =&gt; 32,
         :D =&gt; 2, #Dimension
         :order =&gt; 1, 
         :t0 =&gt; 0.0,
         :dt =&gt; 0.25,
         :tF =&gt; 1.0,
         :case =&gt; &quot;TaylorGreen&quot;,
         :θ =&gt; 0.5,
         :u_in=&gt; 1.0,
        
         :backend =&gt; with_debug,  #or with_mpi()
         :rank_partition=&gt;(2,2),
         :ν =&gt; 0.001,
         :petsc_options =&gt; petsc_options_default(),
         :method=&gt;:VMS,
         :Cᵢ =&gt; [4, 36],
    
         :t_endramp=&gt;0.0,
         :mesh_file =&gt; &quot; &quot;,
         :Re=&gt; 1000,
         
         :c=&gt; 1.0,
 
   )
   
   
 SegregatedVMSSolver.main(params) 
</code></pre><p>The example above run in the <code>REPL</code> emulating a parallel run over 4 processors (you can see it by the options <code>rank_partition</code>). </p><div class="admonition is-info"><header class="admonition-header">numeric info</header><div class="admonition-body"><p>Changing the backend to <code>with_mpi()</code> allows it to run in MPI. <code>with_debug</code> is useful to debug the code.</p></div></div><div class="admonition is-info"><header class="admonition-header">numeric info</header><div class="admonition-body"><p>Creating <code>Log/PrintSim.txt</code> allows to monitor the current state of the simulation. </p></div></div><div class="admonition is-info"><header class="admonition-header">Experimental feature</header><div class="admonition-body"><p>It is possible to specify some x coordinates to export just planes at that coordinate, it is useful for hardcore validation of airfoils. <code>:newtag</code> =&gt; Dict(:range_coordinate=&gt;[0.60 , 0.65, 0.70, 0.75, 0.80], :tagname =&gt; [&quot;V60&quot;, &quot;V65&quot;, &quot;V70&quot;, &quot;V75&quot;, &quot;V80&quot;]),</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><a class="docs-footer-nextpage" href="../mpi/">MPI run »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Friday 1 December 2023 15:24">Friday 1 December 2023</span>. Using Julia version 1.8.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
